<!DOCTYPE HTML>

<html>
	<head>
	
	<script>
		function calc(eq) {
			var start = 0;
			if (eq.charAt(0) == '(') ++start;
			var end = eq.length - 1;
			if (eq.charAt(eq.length - 1)) --end;
			var pos = start;
			var cnt = 0;
			for (; pos <= end; ++pos) {
				var ch = eq.charAt(pos);
				if (ch == '(') {
					++cnt;
					continue;
				}
				if (ch == ')') {
					--cnt;
					continue;
				}
				if (cnt > 0) continue;
				if (ch == '+' || ch == '-') break;
			}
			if (pos > end) {
				pos = start;
				cnt = 0;
				for (; pos <= end; ++pos) {
					var ch = eq.charAt(pos);
					if (ch == '(') {
						++cnt;
						continue;
					}
					if (ch == ')') {
						--cnt;
						continue;
					}
					if (cnt > 0) continue;
					if (ch == '*' || ch == '/') break;
				}
			}
			if (pos > end) return Number(eq);
			var tmp1 = calc(eq.substring(start, pos - 1));
			var tmp2 = calc(eq.substring(pos + 1, end));
			if (eq.charAt(pos) == '+') return tmp1 + tmp2;
			if (eq.charAt(pos) == '-') return tmp1 - tmp2;
			if (eq.charAt(pos) == '*') return tmp1 * tmp2;
			if (eq.charAt(pos) == '/') return tmp1 / tmp2;
		}
		
		var equation = "";
		var isAnswer = false;
		
		function append(ch) {
			if (isAnswer) equation = "";
			equation += ch;
			isAnswer = false;
		}
		
		function clear() {
			equation = "";
			isAnswer = false;
		}
		
		function backSpace() {
			if (isAnswer) equation = "";
			else equation = equation.substring(0, equation.length - 2);
			isAnswer = false;
		}
		
		function getAnswer() {
			var textBoxNode = getElementById("t");
			textBoxNode.innerHtml = toString(calc(equation));
			isAnswer = true;
		}
		
		function createButton(ch) {
			var buttonNode = document.createElement("button");
			buttonNode.setAttribute("type", "button");
			if (ch != '=' && ch != 'd' && ch != 'C') {
				buttonNode.setAttribute("onclick", "append(ch)");
			}
			else {
				if (ch == '=') buttonNode.setAttribute("onclick", "getAnswer()");
				if (ch == 'd') buttonNode.setAttribute("onclick", "backSpace()");
				if (ch == 'C') buttonNode.setAttribute("onclick", "clear()");
			}
			var textNode;
			if (ch == 'd')
				textNode = document.createTextNode("¡û");
			else
				textNode = document.createTextNode(ch);
			buttonNode.appendChild(textNode);
			return buttonNode;
		}
	</script>
	
	</head>
	<body>
	</body>
</html>